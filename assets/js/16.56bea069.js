(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{371:function(t,e,r){"use strict";r.r(e);var a=r(45),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"操作场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#操作场景"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),r("p",[t._v("腾讯云容器服务开源版（Tencent Kubernetes Engine Stack，TKE Stack）是面向私有化环境的开源容器编排引擎。为简化平台安装过程，容器服务开源版基于 tke-installer 安装器，提供了向导式的图形化安装指引界面。您可参考本文快速创建容器服务开源版控制台。")]),t._v(" "),r("h2",{attrs:{id:"前提条件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),r("p",[t._v("已具备2个可使用节点，其中1个节点机型至少配置8核16G内存。另1个节点无特殊要求，作为 installer 节点使用。本文均以操作系统为 CentOS 7.6 的腾讯云云服务器为例。详情请参见 "),r("a",{attrs:{href:"https://tcloud-doc.isd.com/document/product/213/4855",target:"_blank",rel:"noopener noreferrer"}},[t._v("创建实例"),r("OutboundLink")],1),t._v("。")]),t._v(" "),r("h2",{attrs:{id:"操作步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),r("h3",{attrs:{id:"步骤1-安装准备"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-安装准备"}},[t._v("#")]),t._v(" 步骤1：安装准备")]),t._v(" "),r("ol",[r("li",[t._v("参考 "),r("a",{attrs:{href:"https://cloud.tencent.com/document/product/213/5436",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用标准登录方式登录 Linux 实例（推荐）"),r("OutboundLink")],1),t._v("，登录已准备好的 installer 节点。")]),t._v(" "),r("li",[t._v("执行以下命令，下载 tke-installer 安装器至 "),r("code",[t._v("/data")]),t._v(" 目录下。")])]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("version=v1.2.3 && wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-x86_64-$version.run{,.sha256} && sha256sum --check --status tke-installer-x86_64-$version.run.sha256 && chmod +x tke-installer-x86_64-$version.run\n")])])]),r("blockquote",[r("p",[t._v("?")]),t._v(" "),r("ul",[r("li",[t._v("您可查看 TKE Stack "),r("a",{attrs:{href:"https://github.com/tkestack/tke/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("Release"),r("OutboundLink")],1),t._v(" 按需选择版本进行安装，本文以 v1.2.3 版本为例，建议您安装最新版本。")]),t._v(" "),r("li",[t._v("tke-installer 约为5GB，包含安装所需资源，请确保节点具备足够空间。")])])]),t._v(" "),r("ol",{attrs:{start:"3"}},[r("li",[t._v("执行以下命令，安装 tke-installer。")])]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("./tke-installer-x86_64-$version.run\n")])])]),r("ol",{attrs:{start:"4"}},[r("li",[t._v("访问返回信息中给出的如下路径，开始控制台安装。")])]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("http://xxx.xxx.xx.xx:8080/index.html\n")])])]),r("h3",{attrs:{id:"步骤2-控制台安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-控制台安装"}},[t._v("#")]),t._v(" 步骤2：控制台安装")]),t._v(" "),r("ol",[r("li",[t._v("在 TKE Stacke “基本设置”页面，参考以下提示进行设置，并单击【下一步】。如下图所示：\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/c157649f5b2cd04290db5a2b9264d6b7.png",alt:""}}),t._v(" "),r("ul",[r("li",[r("strong",[t._v("用户名")]),t._v("：TKE Stack 控制台管理员名称。")]),t._v(" "),r("li",[r("strong",[t._v("密码")]),t._v("：TKE Stack 控制台管理员密码。")]),t._v(" "),r("li",[r("strong",[t._v("高可用设置")]),t._v("：请按需进行配置，本文以【不设置】为例。\n"),r("ul",[r("li",[r("strong",[t._v("TKE提供")]),t._v("：在所有 master 节点额外安装 Keepalived 完成 VIP 的配置与连接。")]),t._v(" "),r("li",[r("strong",[t._v("使用已有")]),t._v("：对接已配置好的外部负载均衡实例。")]),t._v(" "),r("li",[r("strong",[t._v("不设置")]),t._v("：访问第一台 master 节点的 APIServer。")])])])])]),t._v(" "),r("li",[t._v("在“集群设置”页面，参考以下提示进行设置，并单击【下一步】。如下图所示：\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/241e2b3a22ab3c3506410f9efbc15cb5.png",alt:""}}),t._v("\n主要参数信息如下：\n"),r("ul",[r("li",[r("strong",[t._v("网卡名称")]),t._v("：集群节点使用的网卡，请根据实际环境进行填写，默认为 "),r("code",[t._v("eth0")]),t._v("。")]),t._v(" "),r("li",[r("strong",[t._v("GPU类型")]),t._v("：请按需进行配置，本文以【不使用】为例。\n"),r("ul",[r("li",[r("strong",[t._v("不使用")]),t._v("：不安装 Nvidia GPU 相关驱动。")]),t._v(" "),r("li",[r("strong",[t._v("Virtual")]),t._v("：自动为集群安装 "),r("a",{attrs:{href:"https://github.com/tkestack/docs/blob/master/features/gpumanager.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("GPUManager"),r("OutboundLink")],1),t._v(" 扩展组件。")]),t._v(" "),r("li",[r("strong",[t._v("Physical")]),t._v("：自动为集群安装 "),r("a",{attrs:{href:"https://github.com/NVIDIA/k8s-device-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nvidia-k8s-device-plugin"),r("OutboundLink")],1),t._v("。")])])]),t._v(" "),r("li",[r("strong",[t._v("容器网络")]),t._v("：将为集群内容器分配在容器网络地址范围内的 IP 地址，您可以自定义三大私有网段作为容器网络。根据您选择的集群内服务数量的上限，自动分配适当大小的 CIDR 段用于 Kubernetes service。根据您选择 Pod 数量上限/节点，自动为集群内每台服务器分配一个适当大小的网段用于该主机分配 Pod 的 IP 地址。\n"),r("ul",[r("li",[r("strong",[t._v("CIDR")]),t._v("：集群内 Service、Pod 等资源所在网段。")]),t._v(" "),r("li",[r("strong",[t._v("Pod数量上限/节点")]),t._v("：分配给每个 Node 的 CIDR 大小。")]),t._v(" "),r("li",[r("strong",[t._v("Service数量上限/集群")]),t._v("：分配给 Sevice 的 CIDR 大小。")])])]),t._v(" "),r("li",[r("strong",[t._v("master节点")]),t._v("：")]),t._v(" "),r("li",[r("strong",[t._v("访问地址")]),t._v("：Master 节点的内网 IP，"),r("strong",[t._v("请配置至少8核16G内存及以上的机型")]),t._v("。")]),t._v(" "),r("li",[r("strong",[t._v("SSH端口")]),t._v("：请确保目标机器安全组开放22端口和 ICMP 协议，否则无法远程登录和 PING 通。")]),t._v(" "),r("li",[r("strong",[t._v("高级设置")]),t._v("：请按需自定义 Global 集群的 Docker、kube-apiserver、kube-controller-manager、kube-scheduler、kubelet 运行参数。")])])]),t._v(" "),r("li",[t._v("在“认证设置”页面，参考以下提示选择 TKE Stack 控制台认证信息，并单击【下一步】。如下图所示：\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/c838f9b7580fe8d98fcd05de65aa7b8e.png",alt:""}}),t._v(" "),r("ul",[r("li",[r("strong",[t._v("认证方式")]),t._v("：请按需选择，本文以【TKE提供】为例。\n"),r("ul",[r("li",[r("strong",[t._v("TKE提供")]),t._v("：使用 TKE 自带的认证方式。")]),t._v(" "),r("li",[r("strong",[t._v("OIDC")]),t._v("：使用 OIDC 认证方式，详情请参见 "),r("a",{attrs:{href:"https://kubernetes.io/docs/reference/access-authn-authz/authentication/#openid-connect-tokens",target:"_blank",rel:"noopener noreferrer"}},[t._v("OIDC"),r("OutboundLink")],1),t._v("。")])])])])]),t._v(" "),r("li",[t._v("在“镜像仓库设置”页面，参考以下提示设置镜像仓库，并单击【下一步】。如下图所示：\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/1413a363eb8b50b0120c0aa13cef87c1.png",alt:""}}),t._v(" "),r("ul",[r("li",[r("strong",[t._v("镜像仓库类型")]),t._v("：请按需设置，本文以【TKE提供】为例。\n"),r("ul",[r("li",[r("strong",[t._v("TKE提供")]),t._v("：使用 TKE 自带的镜像仓库。")]),t._v(" "),r("li",[r("strong",[t._v("第三方仓库")]),t._v("：已配置好的外部镜像仓库。若选择【第三方仓库】，TKE Stack 将不会再安装镜像仓库，而是使用您提供的镜像仓库作为默认镜像仓库服务。")])])])])]),t._v(" "),r("li",[t._v("在“业务设置”页面，选择是否开启 TKE Stack 控制台业务模块，建议开启。")]),t._v(" "),r("li",[t._v("在“监控设置”页面，参考以下提示进行设置，并单击【下一步】。如下图所示：\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/7236c01103b3fe9b02bc971b10e652b4.png",alt:""}}),t._v(" "),r("ul",[r("li",[r("strong",[t._v("监控存储类型")]),t._v("：请按需设置，本文以【TKE提供】为例。\n"),r("ul",[r("li",[r("strong",[t._v("TKE提供")]),t._v("：使用 TKE 自带的 Influxdb 作为存储。")]),t._v(" "),r("li",[r("strong",[t._v("外部InfluxDB")]),t._v("：对接外部的 Influxdb 作为存储。")]),t._v(" "),r("li",[r("strong",[t._v("外部ES")]),t._v("：对接外部的 Elasticsearch 作为存储。")]),t._v(" "),r("li",[r("strong",[t._v("不使用")]),t._v("：不使用监控。")])])])])]),t._v(" "),r("li",[t._v("在“控制台设置”页面，选择是否开启控制台，建议开启，并单击【下一步】。如下图所示：\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/11cf5c00c6697e1693b7c446855d5f84.png",alt:""}}),t._v(" "),r("ul",[r("li",[r("strong",[t._v("证书类型")]),t._v("：请按需选择，本文以【自签名证书】为例。\n"),r("ul",[r("li",[r("strong",[t._v("自签名证书")]),t._v("：使用 TKE 带有的自签名证书。")]),t._v(" "),r("li",[r("strong",[t._v("指定服务端证书")]),t._v("：填写已备案域名的服务器证书。")])])])])]),t._v(" "),r("li",[t._v("在“配置预览”页面，确认 TKE Stack 控制台所有配置正确后单击【安装】。\n安装成功将返回如下信息。\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/83eee3292843650f62fae194d415671c.png",alt:""}})]),t._v(" "),r("li",[t._v("单击【查看指引】，根据弹出的“操作指引”窗口中的步骤配置域名，访问 TKE Stack 控制台。")])]),t._v(" "),r("h2",{attrs:{id:"相关操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#相关操作"}},[t._v("#")]),t._v(" 相关操作")]),t._v(" "),r("p",[t._v("您还可参考 "),r("a",{attrs:{href:"https://cloud.tencent.com/document/product/1205/43565",target:"_blank",rel:"noopener noreferrer"}},[t._v("创建及导入集群"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://cloud.tencent.com/document/product/1205/43598",target:"_blank",rel:"noopener noreferrer"}},[t._v("创建业务及服务"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://cloud.tencent.com/document/product/1205/43614",target:"_blank",rel:"noopener noreferrer"}},[t._v("管理资源"),r("OutboundLink")],1),t._v(" 等操作，创建和管理容器集群，并在集群内快速、弹性地部署您的服务。")])])}),[],!1,null,null,null);e.default=n.exports}}]);