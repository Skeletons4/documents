<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>操作场景</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.487d2c02.js" as="script"><link rel="preload" href="/assets/js/2.dd3e4e7e.js" as="script"><link rel="preload" href="/assets/js/16.56bea069.js" as="script"><link rel="prefetch" href="/assets/js/10.5137b374.js"><link rel="prefetch" href="/assets/js/11.dc034cdd.js"><link rel="prefetch" href="/assets/js/12.6dae9ec3.js"><link rel="prefetch" href="/assets/js/13.658fefc0.js"><link rel="prefetch" href="/assets/js/14.10ea1211.js"><link rel="prefetch" href="/assets/js/15.6404a911.js"><link rel="prefetch" href="/assets/js/17.0cf52a15.js"><link rel="prefetch" href="/assets/js/18.9089aff0.js"><link rel="prefetch" href="/assets/js/19.11f6e719.js"><link rel="prefetch" href="/assets/js/20.d1beb67c.js"><link rel="prefetch" href="/assets/js/21.adc2c0c3.js"><link rel="prefetch" href="/assets/js/22.77a850be.js"><link rel="prefetch" href="/assets/js/23.84aff4a4.js"><link rel="prefetch" href="/assets/js/24.477aa370.js"><link rel="prefetch" href="/assets/js/25.d9759363.js"><link rel="prefetch" href="/assets/js/3.3a852c24.js"><link rel="prefetch" href="/assets/js/4.e05c873c.js"><link rel="prefetch" href="/assets/js/5.f3e6ed41.js"><link rel="prefetch" href="/assets/js/6.498ab014.js"><link rel="prefetch" href="/assets/js/7.428f33fc.js"><link rel="prefetch" href="/assets/js/8.0d498a92.js"><link rel="prefetch" href="/assets/js/9.37bd2a66.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="操作场景"><a href="#操作场景" class="header-anchor">#</a> 操作场景</h2> <p>腾讯云容器服务开源版（Tencent Kubernetes Engine Stack，TKE Stack）是面向私有化环境的开源容器编排引擎。为简化平台安装过程，容器服务开源版基于 tke-installer 安装器，提供了向导式的图形化安装指引界面。您可参考本文快速创建容器服务开源版控制台。</p> <h2 id="前提条件"><a href="#前提条件" class="header-anchor">#</a> 前提条件</h2> <p>已具备2个可使用节点，其中1个节点机型至少配置8核16G内存。另1个节点无特殊要求，作为 installer 节点使用。本文均以操作系统为 CentOS 7.6 的腾讯云云服务器为例。详情请参见 <a href="https://tcloud-doc.isd.com/document/product/213/4855" target="_blank" rel="noopener noreferrer">创建实例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="操作步骤"><a href="#操作步骤" class="header-anchor">#</a> 操作步骤</h2> <h3 id="步骤1-安装准备"><a href="#步骤1-安装准备" class="header-anchor">#</a> 步骤1：安装准备</h3> <ol><li>参考 <a href="https://cloud.tencent.com/document/product/213/5436" target="_blank" rel="noopener noreferrer">使用标准登录方式登录 Linux 实例（推荐）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，登录已准备好的 installer 节点。</li> <li>执行以下命令，下载 tke-installer 安装器至 <code>/data</code> 目录下。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>version=v1.2.3 &amp;&amp; wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-x86_64-$version.run{,.sha256} &amp;&amp; sha256sum --check --status tke-installer-x86_64-$version.run.sha256 &amp;&amp; chmod +x tke-installer-x86_64-$version.run
</code></pre></div><blockquote><p>?</p> <ul><li>您可查看 TKE Stack <a href="https://github.com/tkestack/tke/releases" target="_blank" rel="noopener noreferrer">Release<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 按需选择版本进行安装，本文以 v1.2.3 版本为例，建议您安装最新版本。</li> <li>tke-installer 约为5GB，包含安装所需资源，请确保节点具备足够空间。</li></ul></blockquote> <ol start="3"><li>执行以下命令，安装 tke-installer。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>./tke-installer-x86_64-$version.run
</code></pre></div><ol start="4"><li>访问返回信息中给出的如下路径，开始控制台安装。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>http://xxx.xxx.xx.xx:8080/index.html
</code></pre></div><h3 id="步骤2-控制台安装"><a href="#步骤2-控制台安装" class="header-anchor">#</a> 步骤2：控制台安装</h3> <ol><li>在 TKE Stacke “基本设置”页面，参考以下提示进行设置，并单击【下一步】。如下图所示：
<img src="https://main.qcloudimg.com/raw/c157649f5b2cd04290db5a2b9264d6b7.png" alt=""> <ul><li><strong>用户名</strong>：TKE Stack 控制台管理员名称。</li> <li><strong>密码</strong>：TKE Stack 控制台管理员密码。</li> <li><strong>高可用设置</strong>：请按需进行配置，本文以【不设置】为例。
<ul><li><strong>TKE提供</strong>：在所有 master 节点额外安装 Keepalived 完成 VIP 的配置与连接。</li> <li><strong>使用已有</strong>：对接已配置好的外部负载均衡实例。</li> <li><strong>不设置</strong>：访问第一台 master 节点的 APIServer。</li></ul></li></ul></li> <li>在“集群设置”页面，参考以下提示进行设置，并单击【下一步】。如下图所示：
<img src="https://main.qcloudimg.com/raw/241e2b3a22ab3c3506410f9efbc15cb5.png" alt="">
主要参数信息如下：
<ul><li><strong>网卡名称</strong>：集群节点使用的网卡，请根据实际环境进行填写，默认为 <code>eth0</code>。</li> <li><strong>GPU类型</strong>：请按需进行配置，本文以【不使用】为例。
<ul><li><strong>不使用</strong>：不安装 Nvidia GPU 相关驱动。</li> <li><strong>Virtual</strong>：自动为集群安装 <a href="https://github.com/tkestack/docs/blob/master/features/gpumanager.md" target="_blank" rel="noopener noreferrer">GPUManager<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 扩展组件。</li> <li><strong>Physical</strong>：自动为集群安装 <a href="https://github.com/NVIDIA/k8s-device-plugin" target="_blank" rel="noopener noreferrer">Nvidia-k8s-device-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li></ul></li> <li><strong>容器网络</strong>：将为集群内容器分配在容器网络地址范围内的 IP 地址，您可以自定义三大私有网段作为容器网络。根据您选择的集群内服务数量的上限，自动分配适当大小的 CIDR 段用于 Kubernetes service。根据您选择 Pod 数量上限/节点，自动为集群内每台服务器分配一个适当大小的网段用于该主机分配 Pod 的 IP 地址。
<ul><li><strong>CIDR</strong>：集群内 Service、Pod 等资源所在网段。</li> <li><strong>Pod数量上限/节点</strong>：分配给每个 Node 的 CIDR 大小。</li> <li><strong>Service数量上限/集群</strong>：分配给 Sevice 的 CIDR 大小。</li></ul></li> <li><strong>master节点</strong>：</li> <li><strong>访问地址</strong>：Master 节点的内网 IP，<strong>请配置至少8核16G内存及以上的机型</strong>。</li> <li><strong>SSH端口</strong>：请确保目标机器安全组开放22端口和 ICMP 协议，否则无法远程登录和 PING 通。</li> <li><strong>高级设置</strong>：请按需自定义 Global 集群的 Docker、kube-apiserver、kube-controller-manager、kube-scheduler、kubelet 运行参数。</li></ul></li> <li>在“认证设置”页面，参考以下提示选择 TKE Stack 控制台认证信息，并单击【下一步】。如下图所示：
<img src="https://main.qcloudimg.com/raw/c838f9b7580fe8d98fcd05de65aa7b8e.png" alt=""> <ul><li><strong>认证方式</strong>：请按需选择，本文以【TKE提供】为例。
<ul><li><strong>TKE提供</strong>：使用 TKE 自带的认证方式。</li> <li><strong>OIDC</strong>：使用 OIDC 认证方式，详情请参见 <a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/#openid-connect-tokens" target="_blank" rel="noopener noreferrer">OIDC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li></ul></li></ul></li> <li>在“镜像仓库设置”页面，参考以下提示设置镜像仓库，并单击【下一步】。如下图所示：
<img src="https://main.qcloudimg.com/raw/1413a363eb8b50b0120c0aa13cef87c1.png" alt=""> <ul><li><strong>镜像仓库类型</strong>：请按需设置，本文以【TKE提供】为例。
<ul><li><strong>TKE提供</strong>：使用 TKE 自带的镜像仓库。</li> <li><strong>第三方仓库</strong>：已配置好的外部镜像仓库。若选择【第三方仓库】，TKE Stack 将不会再安装镜像仓库，而是使用您提供的镜像仓库作为默认镜像仓库服务。</li></ul></li></ul></li> <li>在“业务设置”页面，选择是否开启 TKE Stack 控制台业务模块，建议开启。</li> <li>在“监控设置”页面，参考以下提示进行设置，并单击【下一步】。如下图所示：
<img src="https://main.qcloudimg.com/raw/7236c01103b3fe9b02bc971b10e652b4.png" alt=""> <ul><li><strong>监控存储类型</strong>：请按需设置，本文以【TKE提供】为例。
<ul><li><strong>TKE提供</strong>：使用 TKE 自带的 Influxdb 作为存储。</li> <li><strong>外部InfluxDB</strong>：对接外部的 Influxdb 作为存储。</li> <li><strong>外部ES</strong>：对接外部的 Elasticsearch 作为存储。</li> <li><strong>不使用</strong>：不使用监控。</li></ul></li></ul></li> <li>在“控制台设置”页面，选择是否开启控制台，建议开启，并单击【下一步】。如下图所示：
<img src="https://main.qcloudimg.com/raw/11cf5c00c6697e1693b7c446855d5f84.png" alt=""> <ul><li><strong>证书类型</strong>：请按需选择，本文以【自签名证书】为例。
<ul><li><strong>自签名证书</strong>：使用 TKE 带有的自签名证书。</li> <li><strong>指定服务端证书</strong>：填写已备案域名的服务器证书。</li></ul></li></ul></li> <li>在“配置预览”页面，确认 TKE Stack 控制台所有配置正确后单击【安装】。
安装成功将返回如下信息。
<img src="https://main.qcloudimg.com/raw/83eee3292843650f62fae194d415671c.png" alt=""></li> <li>单击【查看指引】，根据弹出的“操作指引”窗口中的步骤配置域名，访问 TKE Stack 控制台。</li></ol> <h2 id="相关操作"><a href="#相关操作" class="header-anchor">#</a> 相关操作</h2> <p>您还可参考 <a href="https://cloud.tencent.com/document/product/1205/43565" target="_blank" rel="noopener noreferrer">创建及导入集群<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://cloud.tencent.com/document/product/1205/43598" target="_blank" rel="noopener noreferrer">创建业务及服务<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://cloud.tencent.com/document/product/1205/43614" target="_blank" rel="noopener noreferrer">管理资源<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等操作，创建和管理容器集群，并在集群内快速、弹性地部署您的服务。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.487d2c02.js" defer></script><script src="/assets/js/2.dd3e4e7e.js" defer></script><script src="/assets/js/16.56bea069.js" defer></script>
  </body>
</html>
